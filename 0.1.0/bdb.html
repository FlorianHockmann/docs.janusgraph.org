<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;18.&nbsp;BerkeleyDB</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="JanusGraph Documentation"><link rel="up" href="storage-backends.html" title="Part&nbsp;III.&nbsp;Storage Backends"><link rel="prev" href="bigtable.html" title="Chapter&nbsp;17.&nbsp;Google Cloud Bigtable"><link rel="next" href="inmemorystorage.html" title="Chapter&nbsp;19.&nbsp;InMemory Storage Backend"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="js/jquery/jquery-1.11.0.js"></script><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript" src="js/jquery/jquery-migrate-1.2.1.min.js"></script><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="style-css-css" href="avada-stub/style.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="media-css-css" href="avada-stub/css/media.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="animate-css-css" href="avada-stub/css/animate-custom.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="inline-blob-from-avada-prototype" href="avada-stub/css/inlineblob.css" type="text/css" media="all"><link xmlns:d="http://docbook.org/ns/docbook" rel="stylesheet" id="inline-blob-from-avada-prototype-janusgraph-docs-specific" href="css/docs.css" type="text/css" media="all"><script xmlns:d="http://docbook.org/ns/docbook" type="text/javascript">
      WebFontConfig = {
        google: {
          families: [
            "Lato:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese",
            "Open+Sans:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese",
            "Antic+Slab:400,400italic,700,700italic:latin,greek-ext,cyrillic,latin-ext,greek,cyrillic-ext,vietnamese"
          ]
        },
        custom: {
           families: ['FontAwesome'],
           urls: ['font-awesome-4.0.3/css/font-awesome.css']
        }
      };
      (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
	wf.type = 'text/javascript';
	wf.async = 'true';
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(wf, s);
	})();
    </script></head><body xmlns:d="http://docbook.org/ns/docbook" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div id="wrapper"><div class="header-wrapper"><div class="header-v1"><header id="header"><div class="avada-row" style="margin-top:0px;margin-bottom:0px;"><div class="logo" style="margin-right:0px;margin-top:31px;margin-left:0px;margin-bottom:31px;"><a href="http://janusgraph.org"><img src="avada-stub/images/janusgraph-logo.png" alt="JanusGraph" class="normal_logo"></a></div><nav id="nav" class="nav-holder"><ul class="navigation menu fusion-navbar-nav"><li id="menu-item-4711" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4711"><a href="index.html">Documentation (0.1.0)</a></li><li id="menu-item-4712" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4712 dropdown"><a href="https://docs.janusgraph.org/latest/doc-versions.html">Other Doc Versions</a><div class="dropdown-content"><a href="https://docs.janusgraph.org/latest/index.html">Latest</a><a href="https://docs.janusgraph.org/0.3.0/index.html">Version 0.3.0</a><a href="https://docs.janusgraph.org/0.2.1/index.html">Version 0.2.1</a><a href="https://docs.janusgraph.org/0.2.0/index.html">Version 0.2.0</a><a href="https://docs.janusgraph.org/0.1.1/index.html">Version 0.1.1</a><a href="https://docs.janusgraph.org/0.1.0/index.html">Version 0.1.0</a></div></li><li id="menu-item-4710" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4710"><a href="https://github.com/JanusGraph/janusgraph/releases">Download JanusGraph</a></li></ul></nav><div class="mobile-nav-holder main-menu"></div></div></header></div><div class="init-sticky-header"></div></div><header id="header-sticky" class="sticky-header"><div class="sticky-shadow"><div class="avada-row"><div class="logo"><a href="http://janusgraph.org"><img src="avada-stub/images/janusgraph-logo.png" alt="JanusGraph" data-max-width="" class="normal_logo"></a></div><nav id="sticky-nav" class="nav-holder"><ul class="navigation menu fusion-navbar-nav"><li id="menu-item-4711" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4711"><a href="index.html">Documentation (0.1.0)</a></li><li id="menu-item-4712" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4712 dropdown"><a href="https://docs.janusgraph.org/latest/doc-versions.html">Other Doc Versions</a><div class="dropdown-content"><a href="https://docs.janusgraph.org/latest/index.html">Latest</a><a href="https://docs.janusgraph.org/0.3.0/index.html">Version 0.3.0</a><a href="https://docs.janusgraph.org/0.2.1/index.html">Version 0.2.1</a><a href="https://docs.janusgraph.org/0.2.0/index.html">Version 0.2.0</a><a href="https://docs.janusgraph.org/0.1.1/index.html">Version 0.1.1</a><a href="https://docs.janusgraph.org/0.1.0/index.html">Version 0.1.0</a></div></li><li id="menu-item-4710" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-4710"><a href="https://github.com/JanusGraph/janusgraph/releases">Download JanusGraph</a></li></ul></nav><div class="mobile-nav-holder"></div></div></div></header><div id="main" class="clearfix width-100"><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">JanusGraph Documentation</a></span> &gt; <span class="breadcrumb-link"><a href="storage-backends.html">Storage Backends</a></span> &gt; <span class="breadcrumb-node">BerkeleyDB</span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="bdb"></a>Chapter&nbsp;18.&nbsp;BerkeleyDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="bdb.html#_berkeleydb_setup">18.1. BerkeleyDB Setup</a></span></dt><dt><span class="section"><a href="bdb.html#_berkeleydb_specific_configuration">18.2. BerkeleyDB Specific Configuration</a></span></dt><dt><span class="section"><a href="bdb.html#_ideal_use_case">18.3. Ideal Use Case</a></span></dt><dt><span class="section"><a href="bdb.html#_global_graph_operations_3">18.4. Global Graph Operations</a></span></dt></dl></div><div class="blockquote"><table border="0" class="blockquote" style="width: 100%; cellspacing: 0; cellpadding: 0;" summary="Block quote"><tr><td width="10%" valign="top">&nbsp;</td><td width="80%" valign="top"><p>Berkeley DB enables the development of custom data management
solutions, without the overhead traditionally associated with such
custom projects. Berkeley DB provides a collection of well-proven
building-block technologies that can be configured to address any
application need from the hand-held device to the datacenter, from a
local storage solution to a world-wide distributed one, from kilobytes
to petabytes.</p></td><td width="10%" valign="top">&nbsp;</td></tr><tr><td width="10%" valign="top">&nbsp;</td><td colspan="2" align="right" valign="top">--<span class="attribution">
    
    <a class="link" href="http://www.oracle.com/technetwork/products/berkeleydb" target="_top">BerkeleyDB Homepage</a>
    
    
  </span></td></tr></table></div><p>The <a class="link" href="http://www.oracle.com/technetwork/products/berkeleydb" target="_top">Oracle BerkeleyDB</a> storage backend runs in the same JVM as JanusGraph and provides local persistence on a single machine. Hence, the BerkeleyDB storage backend requires that all of the graph data fits on the local disk and all of the frequently accessed graph elements fit into main memory. This imposes a practical limitation of graphs with 10-100s million vertices on commodity hardware. However, for graphs of that size the BerkeleyDB storage backend exhibits high performance because all data can be accessed locally within the same JVM.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_berkeleydb_setup"></a>18.1.&nbsp;BerkeleyDB Setup</h2></div></div></div><p>Since BerkeleyDB runs in the same JVM as JanusGraph, connecting the two only requires a simple configuration and no additional setup:</p><pre class="programlisting">JanusGraph g = JanusGraphFactory.build().
set(<span class="hl-string">"storage.backend"</span>, <span class="hl-string">"berkeleyje"</span>).
set(<span class="hl-string">"storage.directory"</span>, <span class="hl-string">"/tmp/graph"</span>).
open();</pre><p>In the Gremlin shell, you can not define the type of the variables <code class="literal">conf</code> and <code class="literal">g</code>. Therefore, simply leave off the type declaration.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_berkeleydb_specific_configuration"></a>18.2.&nbsp;BerkeleyDB Specific Configuration</h2></div></div></div><p>Refer to <a class="xref" href="config-ref.html" title="Chapter&nbsp;12.&nbsp;Configuration Reference">Chapter&nbsp;12, <i>Configuration Reference</i></a> for a complete listing of all BerkeleyDB specific configuration options in addition to the general JanusGraph configuration options.</p><p>When configuring BerkeleyDB it is recommended to consider the following BerkeleyDB specific configuration options:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="strong"><strong>transactions</strong></span>: Enables transactions and detects conflicting database operations. <span class="strong"><strong>CAUTION:</strong></span> While disabling transactions can lead to better performance it can cause to inconsistencies and even corrupt the database if multiple JanusGraph instances interact with the same instance of BerkeleyDB.</li><li class="listitem"><span class="strong"><strong>cache-percentage</strong></span>: The percentage of JVM heap space (configured via -Xmx) to be allocated to BerkeleyDB for its cache. Try to give BerkeleyDB as much space as possible without causing memory problems for JanusGraph. For instance, if JanusGraph only runs short transactions, use a value of 80 or higher.</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_ideal_use_case"></a>18.3.&nbsp;Ideal Use Case</h2></div></div></div><p>The BerkeleyDB storage backend is best suited for small to medium size graphs with up to 100 million vertices on commodity hardware. For graphs of that size, it will likely deliver higher performance than the distributed storage backends. Note, that BerkeleyDB is also limited in the number of concurrent requests it can handle efficiently because it runs on a single machine. Hence, it is not well suited for applications with many concurrent users mutating the graph, even if that graph is small to medium size.</p><p>Since BerkeleyDB runs in the same JVM as JanusGraph, this storage backend is ideally suited for unit testing of application code using JanusGraph.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_global_graph_operations_3"></a>18.4.&nbsp;Global Graph Operations</h2></div></div></div><p>JanusGraph backed by BerkeleyDB supports global graph operations such as iterating over all vertices or edges. However, note that such operations need to scan the entire database which can require a significant amount of time for larger graphs.</p><p>In order to not run out of memory, it is advised to disable transactions (<code class="literal">storage.transactions=false</code>) when iterating over large graphs. Having transactions enabled requires BerkeleyDB to acquire read locks on the data it is reading. When iterating over the entire graph, these read locks can easily require more memory than is available.</p></div></div></div><div class="clearer"></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bigtable.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="storage-backends.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="inmemorystorage.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;17.&nbsp;Google Cloud Bigtable&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;19.&nbsp;InMemory Storage Backend</td></tr></table></div><footer id="footer"><div class="avada-row"><ul class="copyright"><li>
              Copyright &copy; 2017 JanusGraph Authors. All rights reserved.<br>
              The Linux Foundation has registered trademarks and uses trademarks. For a list of<br>
              trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page.<br>
              Cassandra, HBase, and Hadoop are trademarks of the Apache Software Foundation.<br>
              Berkeley DB and Berkeley DB Java Edition are trademarks of Oracle.<br>
              Documentation generated with <a href="http://www.methods.co.nz/asciidoc/">AsciiDoc</a>, <a href="http://asciidoctor.org/">AsciiDoctor</a>, <a href="http://docbook.sourceforge.net/">DocBook</a>, and <a href="http://saxon.sourceforge.net/">Saxon</a>.
              </li></ul></div></footer></div><script type="text/javascript" src="avada-stub/js/main.js"></script></body></html>